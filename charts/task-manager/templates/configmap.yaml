apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "task-manager.fullname" . }}-config
  namespace: {{ .Values.namespace.name }}
  labels:
    {{- include "task-manager.labels" . | nindent 4 }}
data:
  # Database configuration
  DB_HOST: {{ include "task-manager.postgresql.fullname" . }}
  DB_PORT: "5432"
  DB_NAME: {{ .Values.postgresql.auth.database }}
  DB_USER: {{ .Values.postgresql.auth.username }}

  # Redis configuration
  REDIS_HOST: {{ include "task-manager.redis.host" . }}
  REDIS_PORT: "6379"

  # Java options
  JAVA_OPTS: {{ .Values.app.env.javaOpts | quote }}

  # Spring profiles
  SPRING_PROFILES_ACTIVE: "kubernetes"